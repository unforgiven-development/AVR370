<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>MEGA-1284P Xplained Example Application: MEGA-1284P Xplained example application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">MEGA-1284P Xplained Example Application</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#define-members">Defines</a> &#124;
<a href="#enum-members">Enumerations</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<h1>MEGA-1284P Xplained example application</h1>  </div>
</div>
<div class="contents">
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="define-members"></a>
Defines</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#ga494bd5d8fdc54fad994bc8f1bd6ff4f3">ADC_NUM_OVERSAMPLING</a>&#160;&#160;&#160;16</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#ga97f70a2430c640e184380e20e1c1d0ea">ASCII_BACKSPACE</a>&#160;&#160;&#160;8</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#ga089ed4925403ab02a05e603967c74579">ASCII_CR</a>&#160;&#160;&#160;13</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#ga7b42baa421e0d53aa73e093326d3d033">ASCII_SPACE</a>&#160;&#160;&#160;32</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#gaaf17a949810a6da23af5f4cdda91e04f">MAX_CMD_BUFFER_LEN</a>&#160;&#160;&#160;32</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#ga777dd6b5cde62539647a9ee1dc5c2193">CMD_PROMPT</a>&#160;&#160;&#160;&quot;\r\nMEGA-1284P Xplained&gt;&quot;</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#gafb81a116d11bd1d03a55271c8efec0f5">FLASHCOUNT</a>&#160;&#160;&#160;100</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#ga9c21a7caee326d7803b94ae1952b27ca">IDLE</a>&#160;&#160;&#160;0x01</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Idle SMCR setting.  <a href="#ga9c21a7caee326d7803b94ae1952b27ca"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#gaad04e0c9afdeec307d5b9cb2062d784d">POWER_DOWN</a>&#160;&#160;&#160;0x05</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Power-Down SMCR setting.  <a href="#gaad04e0c9afdeec307d5b9cb2062d784d"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#ga36d7f0d891b4fe08be0e8d709fac9d34">POWER_SAVE</a>&#160;&#160;&#160;0x07</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Power-Save SMCR setting.  <a href="#ga36d7f0d891b4fe08be0e8d709fac9d34"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#ga42d8551dd3f10de6540de8a6fdf05a37">STANDBY</a>&#160;&#160;&#160;0x0D</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Standby SMCR setting.  <a href="#ga42d8551dd3f10de6540de8a6fdf05a37"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#ga8e1c84f98dda8ccd22eca69f6bd89bc4">EXTENDED_STANDBY</a>&#160;&#160;&#160;0x0F</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Extended standby SMCR setting.  <a href="#ga8e1c84f98dda8ccd22eca69f6bd89bc4"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#gadef3034178d2e2de064a8709350e8f01">NUM_COMMANDS</a>&#160;&#160;&#160;12</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#ga72b0c6586646702f74e30e26209f9e5f">QT_KEY_DETECT</a>()&#160;&#160;&#160;(qt_measure_data.qt_touch_status.sensor_states[0] &amp; 0x01)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Macro used for touch key detection.  <a href="#ga72b0c6586646702f74e30e26209f9e5f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#ga00f8a86f3bc21109096ba9da4712ac13">NUMBER_OF_PORTS</a>&#160;&#160;&#160;1</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Number of ports using touch.  <a href="#ga00f8a86f3bc21109096ba9da4712ac13"></a><br/></td></tr>
<tr><td colspan="2"><h2><a name="enum-members"></a>
Enumerations</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">enum &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#ga85acd838657bb927d033495af1e49ca2">adc_sources</a> { <a class="el" href="group__mega__1284p__xplained__group.html#gga85acd838657bb927d033495af1e49ca2a49f0da3beeca97960062e1328ec38dac">FILTER_OUTPUT</a> =  0x05, 
<a class="el" href="group__mega__1284p__xplained__group.html#gga85acd838657bb927d033495af1e49ca2a07eacd516915101d252b3f320d053f46">LIGHT_SENSOR</a> =  0x06, 
<a class="el" href="group__mega__1284p__xplained__group.html#gga85acd838657bb927d033495af1e49ca2a3df8ff212e2cbcbe5f87c6671f7f4a63">NTC</a> =  0x07
 }</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight"><p>ADC sources enum. </p>
 <a href="group__mega__1284p__xplained__group.html#ga85acd838657bb927d033495af1e49ca2">More...</a><br/></td></tr>
<tr><td colspan="2"><h2><a name="func-members"></a>
Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#gafe6035149a64d5f448fbda08e9d1b67f">ISR</a> (PCINT1_vect)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">PCINT8,9,10 ISR used for wake-up from sleep only.  <a href="#gafe6035149a64d5f448fbda08e9d1b67f"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#gab16889ae984b9b798989a0d239283cac">ISR</a> (TIMER1_OVF_vect)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">TIMER1 overflow ISR used to dim LEDs in light sensor demo mode.  <a href="#gab16889ae984b9b798989a0d239283cac"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#ga317c504c8745a1256efed69e0dbf6e66">ISR</a> (TIMER1_COMPB_vect)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">TIMER1 compare B ISR used to dim LEDS in light sensor demo mode.  <a href="#ga317c504c8745a1256efed69e0dbf6e66"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#gad39420cdd896dd12c68e36313139d0a5">ISR</a> (TIMER1_COMPA_vect)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">TIMER1 compare A ISR used to time touch measurement.  <a href="#gad39420cdd896dd12c68e36313139d0a5"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#ga7cfcbe42bd266750aeb6e5d71e5ea479">ISR</a> (TIMER2_OVF_vect)</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">TIMER2 overflow ISR used to indicate 32kHz crystal running.  <a href="#ga7cfcbe42bd266750aeb6e5d71e5ea479"></a><br/></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#ga840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr><td colspan="2"><h2><a name="var-members"></a>
Variables</h2></td></tr>
<tr><td class="memItemLeft" >struct {</td></tr>
<tr><td class="memItemLeft" >&#160;&#160;&#160;char&#160;&#160;&#160;<a class="el" href="mega__1284p__xplained__example_8c.html#a79e4ab3fb6e406a1c09102b4e664587d">cmd</a> [20]</td></tr>
<tr><td class="memItemLeft" >&#160;&#160;&#160;char&#160;&#160;&#160;<a class="el" href="mega__1284p__xplained__example_8c.html#a173d4e8949ae13ff7ef580f4ad3a4edd">help</a> [70]</td></tr>
<tr><td class="memItemLeft" >&#160;&#160;&#160;void(*&#160;&#160;&#160;<a class="el" href="mega__1284p__xplained__example_8c.html#a559b9c01a76ca15440e0d6467c4f3358">func</a> )(void)</td></tr>
<tr><td class="memItemLeft" valign="top">}&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#gab91010fca5542c25a87fdff89cc2f12b">commands</a> [NUM_COMMANDS]</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">uint16_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__mega__1284p__xplained__group.html#ga524180304eb81eec9253a14be8e76209">qt_measurement_period_msec</a> = 25</td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">Touch acquisition timer period in msec.  <a href="#ga524180304eb81eec9253a14be8e76209"></a><br/></td></tr>
</table>
<hr/><a name="_details"></a><h2>Detailed Description</h2>
<h2><a class="anchor" id="application_description"></a>
Description of the example</h2>
<p>This is the example application used to demonstrate the MEGA-1284P Xplained kit. Basically it has two main modes of operation: demo mode or terminal mode. </p>
<h3><a class="anchor" id="application_flowchart"></a>
Example application flowchart</h3>
<div align="center">
<img src="application_flowchart.JPG" alt="application_flowchart.JPG"/>
</div>
 <h3><a class="anchor" id="demo_mode"></a>
Demo mode</h3>
<p>This mode lets the user select in which mode the ATmega1284P should operate: Active, power-save (with the 32kHz crystal connected to the TOSC pins enabled) or power-down. The user can easily measure the power consumption in the different modes by connecting an ampere meter to the two-pins power header. Please refer to the hardware user guide for more details.</p>
<p>The user can also try out capacitive touch sensing by pushing the QTB0 touch button on the board. LED1 will turn on when QTB0 is touched and switch off whenever QTB0 is not touched.</p>
<p>By shorting MISO (pin 7) and GND (pin 9) of the J1 header the ATmega1284P enters light sensor demo mode. The light sensor is then used to adjust the light intensity of the four leds (LED0:3). Normal demo mode will be resumed as soon as this short is removed. </p>
<h3><a class="anchor" id="demo_mode_flowchart"></a>
Demo mode flowchart</h3>
<div align="center">
<img src="demo_mode_flowchart.JPG" alt="demo_mode_flowchart.JPG"/>
</div>
<h3><a class="anchor" id="terminal_mode"></a>
Terminal mode</h3>
<p>This mode uses USART1 of the ATmega1284P to control the application. Start hyperterminal (or the terminal program of choice) and connect to the COM port where the XPLAINED Virtual Com Port is connected. Select baud rate: 57k6, data bits: 8, parity: none, stop bits: 1 and flow control: none.</p>
<p>To start this mode push and hold SW1 while pressing the reset button on the MEGA-1284P Xplained board. Supported commands and a description will then be printed. </p>
<h3><a class="anchor" id="terminal_mode_flowchart"></a>
Terminal mode flowchart</h3>
<div align="center">
<img src="terminal_mode_flowchart.JPG" alt="terminal_mode_flowchart.JPG"/>
</div>
 <hr/><h2>Define Documentation</h2>
<a class="anchor" id="ga494bd5d8fdc54fad994bc8f1bd6ff4f3"></a><!-- doxytag: member="mega_1284p_xplained_example.c::ADC_NUM_OVERSAMPLING" ref="ga494bd5d8fdc54fad994bc8f1bd6ff4f3" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ADC_NUM_OVERSAMPLING&#160;&#160;&#160;16</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga97f70a2430c640e184380e20e1c1d0ea"></a><!-- doxytag: member="mega_1284p_xplained_example.c::ASCII_BACKSPACE" ref="ga97f70a2430c640e184380e20e1c1d0ea" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ASCII_BACKSPACE&#160;&#160;&#160;8</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga089ed4925403ab02a05e603967c74579"></a><!-- doxytag: member="mega_1284p_xplained_example.c::ASCII_CR" ref="ga089ed4925403ab02a05e603967c74579" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ASCII_CR&#160;&#160;&#160;13</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga7b42baa421e0d53aa73e093326d3d033"></a><!-- doxytag: member="mega_1284p_xplained_example.c::ASCII_SPACE" ref="ga7b42baa421e0d53aa73e093326d3d033" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ASCII_SPACE&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga777dd6b5cde62539647a9ee1dc5c2193"></a><!-- doxytag: member="mega_1284p_xplained_example.c::CMD_PROMPT" ref="ga777dd6b5cde62539647a9ee1dc5c2193" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CMD_PROMPT&#160;&#160;&#160;&quot;\r\nMEGA-1284P Xplained&gt;&quot;</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga8e1c84f98dda8ccd22eca69f6bd89bc4"></a><!-- doxytag: member="mega_1284p_xplained_example.c::EXTENDED_STANDBY" ref="ga8e1c84f98dda8ccd22eca69f6bd89bc4" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define EXTENDED_STANDBY&#160;&#160;&#160;0x0F</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Extended standby SMCR setting. </p>

</div>
</div>
<a class="anchor" id="gafb81a116d11bd1d03a55271c8efec0f5"></a><!-- doxytag: member="mega_1284p_xplained_example.c::FLASHCOUNT" ref="gafb81a116d11bd1d03a55271c8efec0f5" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define FLASHCOUNT&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga9c21a7caee326d7803b94ae1952b27ca"></a><!-- doxytag: member="mega_1284p_xplained_example.c::IDLE" ref="ga9c21a7caee326d7803b94ae1952b27ca" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define IDLE&#160;&#160;&#160;0x01</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Idle SMCR setting. </p>

</div>
</div>
<a class="anchor" id="gaaf17a949810a6da23af5f4cdda91e04f"></a><!-- doxytag: member="mega_1284p_xplained_example.c::MAX_CMD_BUFFER_LEN" ref="gaaf17a949810a6da23af5f4cdda91e04f" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_CMD_BUFFER_LEN&#160;&#160;&#160;32</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="gadef3034178d2e2de064a8709350e8f01"></a><!-- doxytag: member="mega_1284p_xplained_example.c::NUM_COMMANDS" ref="gadef3034178d2e2de064a8709350e8f01" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUM_COMMANDS&#160;&#160;&#160;12</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga00f8a86f3bc21109096ba9da4712ac13"></a><!-- doxytag: member="mega_1284p_xplained_example.c::NUMBER_OF_PORTS" ref="ga00f8a86f3bc21109096ba9da4712ac13" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NUMBER_OF_PORTS&#160;&#160;&#160;1</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Number of ports using touch. </p>

</div>
</div>
<a class="anchor" id="gaad04e0c9afdeec307d5b9cb2062d784d"></a><!-- doxytag: member="mega_1284p_xplained_example.c::POWER_DOWN" ref="gaad04e0c9afdeec307d5b9cb2062d784d" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define POWER_DOWN&#160;&#160;&#160;0x05</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Power-Down SMCR setting. </p>

</div>
</div>
<a class="anchor" id="ga36d7f0d891b4fe08be0e8d709fac9d34"></a><!-- doxytag: member="mega_1284p_xplained_example.c::POWER_SAVE" ref="ga36d7f0d891b4fe08be0e8d709fac9d34" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define POWER_SAVE&#160;&#160;&#160;0x07</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Power-Save SMCR setting. </p>

</div>
</div>
<a class="anchor" id="ga72b0c6586646702f74e30e26209f9e5f"></a><!-- doxytag: member="mega_1284p_xplained_example.c::QT_KEY_DETECT" ref="ga72b0c6586646702f74e30e26209f9e5f" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define QT_KEY_DETECT</td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td>&#160;&#160;&#160;(qt_measure_data.qt_touch_status.sensor_states[0] &amp; 0x01)</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Macro used for touch key detection. </p>

</div>
</div>
<a class="anchor" id="ga42d8551dd3f10de6540de8a6fdf05a37"></a><!-- doxytag: member="mega_1284p_xplained_example.c::STANDBY" ref="ga42d8551dd3f10de6540de8a6fdf05a37" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define STANDBY&#160;&#160;&#160;0x0D</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Standby SMCR setting. </p>

</div>
</div>
<hr/><h2>Enumeration Type Documentation</h2>
<a class="anchor" id="ga85acd838657bb927d033495af1e49ca2"></a><!-- doxytag: member="mega_1284p_xplained_example.c::adc_sources" ref="ga85acd838657bb927d033495af1e49ca2" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">enum <a class="el" href="group__mega__1284p__xplained__group.html#ga85acd838657bb927d033495af1e49ca2">adc_sources</a></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>ADC sources enum. </p>
<dl><dt><b>Enumerator: </b></dt><dd><table border="0" cellspacing="2" cellpadding="0">
<tr><td valign="top"><em><a class="anchor" id="gga85acd838657bb927d033495af1e49ca2a49f0da3beeca97960062e1328ec38dac"></a><!-- doxytag: member="FILTER_OUTPUT" ref="gga85acd838657bb927d033495af1e49ca2a49f0da3beeca97960062e1328ec38dac" args="" -->FILTER_OUTPUT</em>&nbsp;</td><td>
<p>RC filter on ADC Channel 5, PA5. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga85acd838657bb927d033495af1e49ca2a07eacd516915101d252b3f320d053f46"></a><!-- doxytag: member="LIGHT_SENSOR" ref="gga85acd838657bb927d033495af1e49ca2a07eacd516915101d252b3f320d053f46" args="" -->LIGHT_SENSOR</em>&nbsp;</td><td>
<p>Light Sensor on ADC Channel 6, PA6. </p>
</td></tr>
<tr><td valign="top"><em><a class="anchor" id="gga85acd838657bb927d033495af1e49ca2a3df8ff212e2cbcbe5f87c6671f7f4a63"></a><!-- doxytag: member="NTC" ref="gga85acd838657bb927d033495af1e49ca2a3df8ff212e2cbcbe5f87c6671f7f4a63" args="" -->NTC</em>&nbsp;</td><td>
<p>NTC sensor on ADC Channel 7, PA7. </p>
</td></tr>
</table>
</dd>
</dl>

</div>
</div>
<hr/><h2>Function Documentation</h2>
<a class="anchor" id="ga7cfcbe42bd266750aeb6e5d71e5ea479"></a><!-- doxytag: member="mega_1284p_xplained_example.c::ISR" ref="ga7cfcbe42bd266750aeb6e5d71e5ea479" args="(TIMER2_OVF_vect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ISR </td>
          <td>(</td>
          <td class="paramtype">TIMER2_OVF_vect&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>TIMER2 overflow ISR used to indicate 32kHz crystal running. </p>
<p>All LEDs (LED0:3) are toggled to indicate that the 32kHz crystal is running. </p>

</div>
</div>
<a class="anchor" id="gad39420cdd896dd12c68e36313139d0a5"></a><!-- doxytag: member="mega_1284p_xplained_example.c::ISR" ref="gad39420cdd896dd12c68e36313139d0a5" args="(TIMER1_COMPA_vect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ISR </td>
          <td>(</td>
          <td class="paramtype">TIMER1_COMPA_vect&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>TIMER1 compare A ISR used to time touch measurement. </p>
<p>The TIMER1 compare A interrupt is used to time the touch acquisition. The period of the timer is set by qt_measurement_period_msec. </p>

</div>
</div>
<a class="anchor" id="gafe6035149a64d5f448fbda08e9d1b67f"></a><!-- doxytag: member="mega_1284p_xplained_example.c::ISR" ref="gafe6035149a64d5f448fbda08e9d1b67f" args="(PCINT1_vect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ISR </td>
          <td>(</td>
          <td class="paramtype">PCINT1_vect&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>PCINT8,9,10 ISR used for wake-up from sleep only. </p>

</div>
</div>
<a class="anchor" id="gab16889ae984b9b798989a0d239283cac"></a><!-- doxytag: member="mega_1284p_xplained_example.c::ISR" ref="gab16889ae984b9b798989a0d239283cac" args="(TIMER1_OVF_vect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ISR </td>
          <td>(</td>
          <td class="paramtype">TIMER1_OVF_vect&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>TIMER1 overflow ISR used to dim LEDs in light sensor demo mode. </p>
<p>LEDs are turned off at overflow ISR and turned on in compare match B ISR. The compare value is adjusted according to the light sensor readings. Brighter light will result in lower light sensor reading (ADC code) which results in shorter time to compare match B interrupt. This means that LEDs will be on longer than off at bright light and vice versa at dark light. </p>

<p><dl class="note"><dt><b>Note:</b></dt><dd>Wait one cycle to be sure PINB0 value has stabilized. </dd></dl>
</p>

</div>
</div>
<a class="anchor" id="ga317c504c8745a1256efed69e0dbf6e66"></a><!-- doxytag: member="mega_1284p_xplained_example.c::ISR" ref="ga317c504c8745a1256efed69e0dbf6e66" args="(TIMER1_COMPB_vect)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ISR </td>
          <td>(</td>
          <td class="paramtype">TIMER1_COMPB_vect&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>TIMER1 compare B ISR used to dim LEDS in light sensor demo mode. </p>
<p>LEDs are turned off at overflow ISR and turned on in compare match B ISR. The compare value is adjusted according to the light sensor readings. Brighter light will result in lower light sensor reading (ADC code) which results in shorter time to compare match B interrupt. This means that LEDs will be on longer than off at bright light and vice versa at dark light. </p>

</div>
</div>
<a class="anchor" id="ga840291bc02cba5474a4cb46a9b9566fe"></a><!-- doxytag: member="mega_1284p_xplained_example.c::main" ref="ga840291bc02cba5474a4cb46a9b9566fe" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>brief Example code that demonstrates the some of the basic features of the MEGA-1284P Xplained kit.</p>
<p>This example code shows some of the basic features of the MEGA-1284P Xplained kit. This includes sleep modes, reading the light sensor and the ntc sensor.</p>
<p>Please refer to the <a class="el" href="group__mega__1284p__xplained__group.html#application_description">detailed description</a> for more informaiton. </p>

</div>
</div>
<hr/><h2>Variable Documentation</h2>
<a class="anchor" id="ga79e4ab3fb6e406a1c09102b4e664587d"></a><!-- doxytag: member="@0::cmd" ref="ga79e4ab3fb6e406a1c09102b4e664587d" args="[20]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="mega__1284p__xplained__example_8c.html#a79e4ab3fb6e406a1c09102b4e664587d">cmd</a>[20]<code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="gab91010fca5542c25a87fdff89cc2f12b"></a><!-- doxytag: member="mega_1284p_xplained_example.c::commands" ref="gab91010fca5542c25a87fdff89cc2f12b" args="[NUM_COMMANDS]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">struct { ... }   <a class="el" href="group__mega__1284p__xplained__group.html#gab91010fca5542c25a87fdff89cc2f12b">commands</a>[NUM_COMMANDS]</td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga559b9c01a76ca15440e0d6467c4f3358"></a><!-- doxytag: member="@0::func" ref="ga559b9c01a76ca15440e0d6467c4f3358" args=")(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(*  <a class="el" href="mega__1284p__xplained__example_8c.html#a559b9c01a76ca15440e0d6467c4f3358">func</a>)(void)<code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga173d4e8949ae13ff7ef580f4ad3a4edd"></a><!-- doxytag: member="@0::help" ref="ga173d4e8949ae13ff7ef580f4ad3a4edd" args="[70]" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char <a class="el" href="mega__1284p__xplained__example_8c.html#a173d4e8949ae13ff7ef580f4ad3a4edd">help</a>[70]<code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

</div>
</div>
<a class="anchor" id="ga524180304eb81eec9253a14be8e76209"></a><!-- doxytag: member="mega_1284p_xplained_example.c::qt_measurement_period_msec" ref="ga524180304eb81eec9253a14be8e76209" args="" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint16_t <a class="el" href="group__mega__1284p__xplained__group.html#ga524180304eb81eec9253a14be8e76209">qt_measurement_period_msec</a> = 25</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>Touch acquisition timer period in msec. </p>

</div>
</div>
</div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Defines</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Mon Mar 28 2011 15:45:24 for MEGA-1284P Xplained Example Application by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
